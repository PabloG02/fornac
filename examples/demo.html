<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fornac Examples</title>
    <link rel="stylesheet" href="examples.css" />
  </head>
  <body>
    <main>
      <h1>Fornac Examples</h1>

      <h2>This is an RNA container</h2>
      <div id="rna_ss" class="demo-container"></div>

      <form class="options-form">
        <label class="options-label"><input type="checkbox" onclick="nc.displayNumbering(this.checked)" checked>Numbering</label>
        <label class="options-label"><input type="checkbox" onclick="nc.displayNodeOutline(this.checked)" checked>Node Outline</label>
        <label class="options-label"><input type="checkbox" onclick="nc.displayNodeLabel(this.checked)" checked>Node Label</label>
        <label class="options-label"><input type="checkbox" onclick="nc.displayLinks(this.checked)" checked>Links</label>
        <label class="options-label"><input type="checkbox" onclick="nc.displayPseudoknotLinks(this.checked)" checked>Pseudoknot Links</label>
        <label class="options-label"><input type="checkbox" onclick="nc.displayProteinLinks(this.checked)" checked>Protein Links</label>
        <label class="options-label"><input type="checkbox" onclick="nc.displayDirectionArrows(this.checked)" checked>Direction Arrows</label>
      </form>

      <h2>This is an RNA container using the NAView layout</h2>
      <div id="naview_ss" class="demo-container"></div>

      <h2>This is an output of an RNA folded using RNAcofold</h2>
      <div id="cofold_ss" class="demo-container"></div>

      <h2>This is a container with multiple RNA molecules</h2>
      <div id="multi_ss" class="demo-container"></div>

      <h2>This is a custom-colored RNA</h2>
      <div id="custom_colors" class="demo-container"></div>

      <form onsubmit="return handleCustomColorApply();" class="options-form">
        <div style="width: 100%;">
          <label for="CustomColorText">Custom Color Text:</label>
          <textarea rows="4" id="CustomColorText" name="CustomColorText">1:red 2:blue 9:#ff7f0e 10:#ff7f0e 11:#ff7f0e 12:#aec7e8</textarea>
        </div>
        <button type="submit" name="Submit" style="margin-top: 10px;">Apply</button>
      </form>
    </main>

    <script src="https://unpkg.com/d3@3.5"></script>
    <script type="module">
      import { FornaContainer } from '@pablog02/fornac';

      function customColorsContainer() {
        let container = new FornaContainer('#custom_colors', {
          animation: false,
          zoomable: true,
          initialSize: [300, 200],
        });

        let options = { structure: '..((((....)))).....', sequence: 'AACGCUUCAUAUAAUCAAA' };
        container.addRNA(options.structure, options);
        return container;
      }

      function normalContainer() {
        let container = new FornaContainer('#rna_ss', {
          animation: false,
          zoomable: true,
          initialSize: [500, 300],
        });

        let options = {
          structure: '..((..((...[)).(((..].))).))..',
          sequence: 'AACGCUUCAUAUAAUCCUAAUGACCUAUAA',
        };
        container.addRNA(options.structure, options);
        return container;
      }

      function naviewContainer() {
        let container = new FornaContainer('#naview_ss', {
          animation: false,
          zoomable: false,
          initialSize: [500, 300],
          layout: 'naview',
        });

        let options = {
          structure: '..((..((...[)).(((..].))).))..',
          sequence: 'AACGCUUCAUAUAAUCCUAAUGACCUAUAA',
        };
        container.addRNA(options.structure, options);
      }

      function cofoldContainer() {
        var container = new FornaContainer('#cofold_ss', {
          animation: true,
          zoomable: false,
          initialSize: [500, 300],
        });

        var options = {
          structure: '..((((...))))...((...((...((.....))...))...))..',
          sequence: 'ACGAUCAGAGAUCAGAGCAUACGACAGCAG&ACGAAAAAAAGAGCAUACGACAGCAG',
        };
        container.addRNA(options.structure, options);
      }

      function multiContainer() {
        var container = new FornaContainer('#multi_ss', {
          animation: false,
          zoomable: true,
          initialSize: [500, 300],
        });

        container.addRNA('..((((....))))', { sequence: 'ACGAUCAGAGAUCA' });
        container.addRNA('.........', { avoidOthers: true, sequence: 'AGUACGUAU' });
      }

      let nc = normalContainer();
      naviewContainer();
      cofoldContainer();
      multiContainer();
      let cc = customColorsContainer();

      // Expose to window for form/checkbox handlers
      window.nc = nc;

      window.handleCustomColorApply = function () {
        cc.addCustomColorsText(document.getElementById('CustomColorText').value);
        return false;
      };
      window.handleCustomColorApply();

      /*
      var options1 = {'structure': '.((((....)))).',
          'sequence': 'GCGACGAUUGUCGG'
      };

      var options1 = {'sequence': 'UACACUGCCCAGGUAGUGCUUACACUGCAACUGUAGUGGG',
          'structure': '..((((((....((((((....))))))....))))))..'}

      var options1 = {'sequence': 'UACACUGCCCAGGUAGUGCUUACACUGCAACUGUAGUGGG',
          'structure': '..((((((....))))))....((((((....))))))..'}
      var options1 = {'structure': '..............',
          'sequence': 'GCGGCGAUUGCCGG'
      };
      */

      //container.changeColorScheme('custom')
      //container.transitionRNA(options1.structure);
    </script>
  </body>
</html>
